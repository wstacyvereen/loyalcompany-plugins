!function(e,i,a,o){e.imageComparison=function(a,o){var n={scope:e(i),editMode:!1,clickToMove:!1,clickLabels:!1,animateClick:!0},t=this;t.opts={};var s=null,m=(e(i),e(a)),l=null,r=null,d=!1,c=!1,f=!1;t.init=function(){t.opts=e.extend({},n,o),t._construct()},t._construct=function(){s=t.opts.scope,l=m.find('.ee-image-comparison__label[data-type="original"]'),r=m.find('.ee-image-comparison__label[data-type="modified"]'),t.checkPosition(),t.setup(),t.events()},t.checkPosition=function(){m.is(".is--visible")||(t.opts.animation?s.scrollTop()+1*s.height()>m.offset().top&&t.animateIn():t.animateIn(),c=!1)},t.animateIn=function(){m.addClass("is--visible"),TweenMax.from(m.find(".ee-image-comparison__image"),.7,{width:"0%",ease:Back.easeOut.config(.7),clearProps:"all"})},t.checkLabel=function(){t.updateLabel(l,m.find(".ee-image-comparison__handle"),m.find(".ee-image-comparison__image"),"left"),t.updateLabel(r,m.find(".ee-image-comparison__handle"),m.find(".ee-image-comparison__image"),"right"),f=!1},t.updateLabel=function(e,i,a,o){"left"==o?e.offset().left+e.outerWidth()+i.outerWidth()/2<a.offset().left+a.outerWidth()?e.removeClass("is--hidden"):e.addClass("is--hidden"):e.offset().left>a.offset().left+a.outerWidth()+i.outerWidth()/2?e.removeClass("is--hidden"):e.addClass("is--hidden")},t.setup=function(){t.drags(m.find(".ee-image-comparison__handle"),m.find(".ee-image-comparison__image"),m,l,r)},t.events=function(){s.on("scroll",function(){c||(c=!0,i.requestAnimationFrame?requestAnimationFrame(function(){t.checkPosition()}):setTimeout(function(){t.checkPosition()},100))}),s.on("resize",function(){f||(f=!0,i.requestAnimationFrame?requestAnimationFrame(function(){t.checkLabel()}):setTimeout(function(){t.checkLabel()},100))}),t.opts.clickToMove&&!t.opts.editMode&&(t.opts.clickLabels&&(l.on("click",function(e){t.onBeforeLabelClick(),t.updatePosition(0,l,r,m.find(".ee-image-comparison__image"),!0),t.onAfterLabelClick()}),r.on("click",function(e){t.onBeforeLabelClick(),t.updatePosition(m.outerWidth(),l,r,m.find(".ee-image-comparison__image"),!0),t.onAfterLabelClick()})),m.on("click",function(i){if(!e(i.target).is(".ee-image-comparison__label")){m.find(".ee-image-comparison__image").addClass("resizable"),m.find(".ee-image-comparison__handle").addClass("draggable");var a=(i.pageX-m.offset().left)/m.outerWidth()*100+"%";t.updatePosition(a,l,r,m.find(".ee-image-comparison__image"),t.opts.animateClick),m.find(".ee-image-comparison__image").removeClass("resizable"),m.find(".ee-image-comparison__handle").removeClass("draggable")}}))},t.onBeforeLabelClick=function(){m.find(".ee-image-comparison__image").addClass("resizable"),m.find(".ee-image-comparison__handle").addClass("draggable")},t.onAfterLabelClick=function(){m.find(".ee-image-comparison__image").removeClass("resizable"),m.find(".ee-image-comparison__handle").removeClass("draggable")},t.drags=function(e,a,o,n,s){e.on("mousedown vmousedown",function(m){e.addClass("draggable"),a.addClass("resizable");var l=e.outerWidth(),r=e.offset().left+l-m.pageX,c=o.offset().left,f=o.outerWidth(),u=c-l/2,g=c+f-l/2;e.parents().on("mousemove vmousemove",function(e){d||(d=!0,i.requestAnimationFrame?requestAnimationFrame(function(){t.animateDraggedHandle(e,r,l,u,g,c,f,a,n,s)}):setTimeout(function(){t.animateDraggedHandle(e,r,l,u,g,c,f,a,n,s)},100))}).on("mouseup vmouseup",function(i){e.removeClass("draggable"),a.removeClass("resizable")}),m.preventDefault()}).on("mouseup vmouseup",function(i){e.removeClass("draggable"),a.removeClass("resizable")})},t.animateDraggedHandle=function(i,a,o,n,s,l,r,c,f,u){var g=i.pageX+a-o;g<n?g=n:g>s&&(g=s);var p=100*(g+o/2-l)/r+"%";m.find(".draggable").css("left",p).on("mouseup vmouseup",function(){e(this).removeClass("draggable"),c.removeClass("resizable")}),t.updatePosition(p,f,u,c,!1),d=!1},t.updatePosition=function(e,i,a,o,n){var s=m.find(".draggable"),l=m.find(".resizable");n?(TweenMax.to(s,.2,{left:e}),TweenMax.to(l,.2,{width:e})):(s.css("left",e),l.css("width",e)),t.updateLabel(a,m.find(".ee-image-comparison__handle"),o,"left"),t.updateLabel(i,m.find(".ee-image-comparison__handle"),o,"right")},t.destroy=function(){m.removeData("imageComparison")},t.init()},e.fn.imageComparison=function(i){return this.each(function(){if(void 0===e(this).data("imageComparison")){var a=new e.imageComparison(this,i);e(this).data("imageComparison",a)}})}}(jQuery,window,document);